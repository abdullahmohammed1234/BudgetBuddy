<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BudgetBuddy - Goals</title>
  <link href="/css/output.css" rel="stylesheet">
</head>
<body class="bg-background text-text font-primary">
  <header class="bg-primary text-white p-4">
    <div class="container mx-auto flex justify-between items-center">
      <div class="flex items-center">
        <h1 class="text-2xl font-heading">BudgetBuddy</h1>
      </div>
       <nav>
        <a href="/onboarding" class="mr-4">Onboarding</a>
        <a href="/budget" class="mr-4">Budget</a>
        <a href="/progress" class="mr-4">Progress</a>
        <a href="/about">About</a>
        <a href="/expenses" class="mr-4">Expenses</a>
        <a href="/goals" class="mr-4">Goals</a>
        <a href="/reports" class="mr-4">Reports</a>
        <a href="/tips">Tips</a>
        <a href="/reminders" class="mr-4">Reminders</a>
      </nav>
    </div>
  </header>
  <main class="min-h-screen p-4">
    <div class="max-w-6xl mx-auto w-full">
      <h1 class="text-3xl font-heading text-primary mb-8 text-center">Savings Goals</h1>
      <div class="grid md:grid-cols-2 gap-8 mb-8">
        <div>
          <h2 class="text-2xl font-heading mb-4">Add New Goal</h2>
          <form action="/goals" method="POST" class="space-y-4">
            <div>
              <label for="name" class="block text-sm font-medium">Goal Name</label>
              <input type="text" id="name" name="name" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
            </div>
            <div>
              <label for="target" class="block text-sm font-medium">Target Amount</label>
              <input type="number" id="target" name="target" step="0.01" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
            </div>
            <button type="submit" class="w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-secondary transition">Add Goal</button>
          </form>
        </div>
        <div>
          <h2 class="text-2xl font-heading mb-4">Your Goals</h2>
          <% savingsGoals.forEach(goal => { %>
            <div class="bg-white p-4 rounded-md shadow mb-4">
              <h3 class="text-xl font-heading"><%= goal.name %></h3>
              <p>Target: $<%= goal.target.toFixed(2) %></p>
              <p>Current: $<%= goal.current.toFixed(2) %></p>
              <p>Progress: <%= goal.target > 0 ? ((goal.current / goal.target) * 100).toFixed(2) : 0 %>%</p>
              <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div class="bg-green-600 h-2.5 rounded-full" style="width: <%= goal.target > 0 ? Math.min((goal.current / goal.target) * 100, 100) : 0 %>%"></div>
              </div>
              <% if (goal.current >= goal.target) { %>
                <p class="text-green-600 font-bold mt-2">Congratulations! Goal achieved!</p>
              <% } else { %>
                <% const remaining = goal.target - goal.current; %>
                <% const months = Math.ceil(remaining / savingsRate); %>
                <% const estDate = new Date(); estDate.setMonth(estDate.getMonth() + months); %>
                <p>Estimated completion: <%= estDate.toLocaleDateString() %></p>
              <% } %>
              <form action="/goals/<%= goal.id %>/update" method="POST" class="mt-4">
                <label for="amount-<%= goal.id %>" class="block text-sm font-medium">Add to Current</label>
                <input type="number" id="amount-<%= goal.id %>" name="amount" step="0.01" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
                <button type="submit" class="mt-2 bg-accent text-white py-1 px-3 rounded-md hover:bg-secondary transition">Update</button>
              </form>
            </div>
          <% }) %>
        </div>
      </div>
    </div>
  </main>
  <footer class="bg-primary text-white p-4 mt-8">
    <div class="container mx-auto text-center">
      <p>&copy; 2026 BudgetBuddy. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>